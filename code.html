<!DOCTYPE html>
<html lang="en">

<!--The head tag describes our html page-->

<head>
    <title>NextEvent: A Coding Challenge by Anna Baschnagel</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />


    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Allan:wght@400;700&family=Barlow+Condensed:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&family=Bebas+Neue&family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;1,100;1,200;1,300;1,400&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
        rel="stylesheet">
    <!-- bootstrap css -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">

    <!-- bootstrap icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css">

    <!-- Devicons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css">

    <!-- custom css -->
    <link href="/css/prism.css" rel="stylesheet" />
    <link href="/css/site.css" rel="stylesheet" />
</head>


<!--The body tag will contain all of the page content-->

<body>
    <header>
        <!-- ==== Nav Section ==== -->
        <nav class="navbar navbar-expand-lg" id="mainNav">
            <div class="container-fluid">
                <a class="navbar-brand fs-1" href="/index.html"><img
                        src="/img/For Web/svg/White logo - no background.svg" height="100" />
                    <span class="ms-5 app-name">NextEvent</span>
                </a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon-acb">
                        <i class="bi bi-list"></i>
                    </span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav ms-auto mb-2 mb-lg-0">
                        <li class="nav-item p-3">
                            <a class="nav-link" href="/index.html">Home</a>
                        </li>
                        <li class="nav-item p-3">
                            <a class="nav-link" href="/app.html">The App</a>
                        </li>
                        <li class="nav-item p-3">
                            <a class="nav-link active" aria-current="page" href="/code.html">The Code</a>
                        </li>
                        <!-- ADD THIS IN BEFORE PUBLISHING -->
                        <li class="nav-item p-3">
                            <a class="nav-link" href="https://github.com/baschnagelac/acbSuperDogEventsFinal.git" target="_blank">The Repo</a>
                        </li>
                        <li class="nav-item p-3">
                            <a class="nav-link" href="https://annabaschnagelportfolio.netlify.app/" target="_blank">About</a>
                        </li>
                        <li class="nav-item p-3">
                            <a class="nav-link" href="#">Blog</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>


    <!-- ==== Main Section ==== -->


    <main class="content container  mt-5">
        <div class="row row-cols-1 row-cols-lg-2 p-3">
            <h1 class=" border-bottom border-2 border-dark">The Code for NextEvent</h1>
            <!-- source code -->
            <div class="col-12 col-lg-8">
                <pre class="line-numbers">
                        <code class="language-javascript ">
                            var events = [{
                                event: "ComicCon",
                                city: "New York",
                                state: "New York",
                                attendance: 240000,
                                date: "06/01/2017",
                            },
                            {
                                event: "ComicCon",
                                city: "New York",
                                state: "New York",
                                attendance: 250000,
                                date: "06/01/2018",
                            },
                            {
                                event: "ComicCon",
                                city: "New York",
                                state: "New York",
                                attendance: 257000,
                                date: "06/01/2019",
                            },
                            {
                                event: "ComicCon",
                                city: "San Diego",
                                state: "California",
                                attendance: 130000,
                                date: "06/01/2017",
                            },
                            {
                                event: "ComicCon",
                                city: "San Diego",
                                state: "California",
                                attendance: 140000,
                                date: "06/01/2018",
                            },
                            {
                                event: "ComicCon",
                                city: "San Diego",
                                state: "California",
                                attendance: 150000,
                                date: "06/01/2019",
                            },
                            {
                                event: "HeroesCon",
                                city: "Charlotte",
                                state: "North Carolina",
                                attendance: 40000,
                                date: "06/01/2017",
                            },
                            {
                                event: "HeroesCon",
                                city: "Charlotte",
                                state: "North Carolina",
                                attendance: 45000,
                                date: "06/01/2018",
                            },
                            {
                                event: "HeroesCon",
                                city: "Charlotte",
                                state: "North Carolina",
                                attendance: 50000,
                                date: "06/01/2019",
                            },
                            ];
                            
                            function buildDropDown() {
                                //get the dropdown meny from the page
                                let dropdownMenu = document.getElementById('eventDropDown');
                                //empty the innerHTML to ensure it is clean
                                dropdownMenu.innerHTML = '';
                            
                                //get our events
                                let currEvents = getEventData();
                            
                                //pull out just the city nanmes 
                                let eventCities = currEvents.map(
                                    function (event) {
                                        return event.city
                                    }
                                );
                                //filter the cities to only distinct city names
                                let distinctCities = [...new Set(eventCities)];
                            
                                //get the template from the page
                                const template = document.getElementById('dropdownItemTemplate');
                            
                                //copy the template
                                let dropdownTemplateNode = document.importNode(template.content, true);
                                //get the a tag from the tempalte copy
                                let menuItem = dropdownTemplateNode.querySelector('a');
                                //change the text
                                menuItem.textContent = 'All Cities';
                                menuItem.setAttribute("data-string", "All");
                                // <a class="drop-down items" data-string="All">All Cities</a>
                            
                                //add items to the page 
                                dropdownMenu.appendChild(menuItem);
                            
                                for (let index = 0; index < distinctCities.length; index++) {
                                    let cityMenuItem = document.importNode(template.content, true);
                                    let cityButton = cityMenuItem.querySelector('a');
                            
                                    cityButton.textContent = distinctCities[index];
                                    cityButton.setAttribute("data-string", distinctCities[index]);
                            
                                    dropdownMenu.appendChild(cityMenuItem);
                                }
                            
                                displayStats(currEvents);
                                displayEventData(currEvents);
                            }
                            
                            function displayStats(eventsArray) {
                                let totalAttendance = calculateTotal(eventsArray);
                                let averageAttendance = calculateAverage(eventsArray);
                                let mostAttended = calculateMax(eventsArray);
                                let leastAttended = calculateMin(eventsArray);
                            
                                //do some math
                            
                                document.getElementById('total').textContent = totalAttendance.toLocaleString(
                                    
                                );
                                document.getElementById('average').textContent = averageAttendance.toLocaleString(
                                    "en-US", {
                                    maximumFractionDigits: 0,
                                    minimumFractionDigits: 0
                                }
                                );
                                document.getElementById('most').textContent = mostAttended.toLocaleString();
                                document.getElementById('least').textContent = leastAttended.toLocaleString();
                            
                            
                            }
                            
                            
                            function calculateTotal(eventsArray) {
                                let sum = 0;
                            
                                for (let index = 0; index < eventsArray.length; index++) {
                                    let currentEvent = eventsArray[index];
                                    sum = sum + currentEvent.attendance;
                            
                            
                                }
                                return sum;
                            }
                            
                            function calculateAverage(eventsArray) {
                                let total = calculateTotal(eventsArray); // above
                                let average = total / eventsArray.length;
                                return average;
                            
                            }
                            
                            function calculateMax(eventsArray) {
                                let max = eventsArray[0].attendance;
                            
                                for (let index = 0; index < eventsArray.length; index++) {
                                    let currentEvent = eventsArray[index];
                            
                                    if (currentEvent.attendance > max) {
                                        max = currentEvent.attendance;
                                    }
                            
                                }
                                return max;
                            
                            }
                            
                            function calculateMin(eventsArray) {
                                let min = eventsArray[0].attendance;
                            
                                for (let index = 0; index < eventsArray.length; index++) {
                                    let currentEvent = eventsArray[index];
                                    if (currentEvent.attendance < min) {
                                        min = currentEvent.attendance;
                                    }
                                }
                                return min;
                            
                            }
                            
                            function displayEventData(eventsArray) {
                                let tableBody = document.getElementById('eventTableBody');
                                const tableRowTemplate = document.getElementById('eventTableRowTemplate');
                            
                                tableBody.innerHTML = ''; // clear table body 
                            
                                for (let i = 0; i < eventsArray.length; i++) {
                                    let eventRow = document.importNode(tableRowTemplate.content, true);
                                    let currentEvent = eventsArray[i];
                            
                            
                                    let tableCells = eventRow.querySelectorAll('td');
                            
                                    tableCells[0].textContent = currentEvent.event;
                                    tableCells[1].textContent = currentEvent.city;
                                    tableCells[2].textContent = currentEvent.state;
                                    tableCells[3].textContent = currentEvent.attendance.toLocaleString( "en-US", {
                                        maximumFractionDigits: 0,
                                        minimumFractionDigits: 0
                                    });
                                    tableCells[4].textContent = currentEvent.date;
                            
                                    tableBody.appendChild(eventRow);
                            
                            
                            
                                }
                            
                            
                            
                            }
                            
                            function getEventData() { // went into dropdown function
                                let currentEvents = JSON.parse(localStorage.getItem('superDogEventData')); // do i have anything in storage
                            
                                if (currentEvents == null) { //if i don't, use the events array and store it so next time i have something in stoage
                                    currentEvents = events;
                                    localStorage.setItem('superDogEventData', JSON.stringify(currentEvents)); //JSON - put into string then parse back into object
                                }
                            
                                return currentEvents;
                            }
                            
                            function getEvents(element) {
                                let currentEvents = getEventData(); //get all events we have full array of every event
                                let cityName = element.getAttribute('data-string'); 
                                //from a tag element in template give me your data-string attribute which we set to be hte name 
                                //of city they clcked on reducing to city data
                            
                                let filteredEvents = currentEvents;
                            
                                if (cityName != 'All') {
                                     filteredEvents = currentEvents.filter(
                                        function (event) {
                                            if (cityName == event.city) {
                                                return event;
                                            }
                                        }
                                    );
                                }
                            
                            
                                document.getElementById('statsHeader').textContent = cityName;
                                displayStats(filteredEvents);
                                displayEventData(filteredEvents);
                            }
                            
                            function saveEventData() {
                                //get info from form inputs
                                let eventName = document.getElementById('newEventName').value;
                                let cityName = document.getElementById('newEventCity').value;
                                let eventAttendance = parseInt(document.getElementById('newEventAttendance').value);
                                let eventDate = document.getElementById('newEventDate').value;
                            
                                eventDate = `${eventDate} 00:00`;
                                eventDate = new Date(eventDate).toLocaleDateString();
                            
                                let stateSelect = document.getElementById('newEventState');
                                let state = stateSelect.options[stateSelect.selectedIndex].text;
                            
                                let newEvent = {
                                        event: eventName,
                                        city: cityName,
                                        state: state,
                                        attendance: eventAttendance,
                                        date: eventDate,
                                };
                            
                                let currentEvents = getEventData();
                                currentEvents.push(newEvent);
                            
                                localStorage.setItem("superDogEventData", JSON.stringify(currentEvents));
                                //update the page
                            
                                buildDropDown();
                                document.getElementById('statsHeader').textContent = 'All';
                                document.getElementById('newEventForm').reset();
                            }
                            
                            
                        </code>
                    </pre>
            </div>
            <!-- code description -->
            <div class="col-12 col-lg-4">
                <h5 class="fs-2">The code is structured in three functions</h5>
                <p>Please Note: Some of the characters may not display correctly, please see the Repo (linked in navigation menu) for the full details</p>
                <code>var events = [{}]</code>
                <p>Before the functions start, there is an array of objects. Each object has five properties (event, city, state, attendence, and date) for a variety of events.</p> 
                    <code>function buildDropDown()</code>
                    <p>is a function that runs when the page loads. First, the function gets the dropdown menu from the page via getElementById with the ID of eventDropDown. Next, it empties the dropdownMenu's innerHTML to an empty string to ensure it is clean for the user. Then, it calls to get our events with the getEventData function. Also, it uses .map to pull out JUST the city names of the event data. Since there are multiple events in each city, it then filters the cities to only DISTINCT city names using the Set function. In the HTML document, there is a template for the dropdown items. The function then gets this template from the page using the ID 'dropdownItemTemplate'. After it gets the template from the page, it must copy the template using document.importNode. After the template has been brought in and copied, the function gets the anchor tag from the template copy using the querySelector. Next, the function changes the text equal to 'All Cities'. And lastly, the function adds items to the page via appendChild. A for-loop is used to increment through the distinct cities in the dropdown menu. Finally, the displayStats and displayEventData functions are called.</p> 
                    <code>function getEventData()</code>
                    <p>function was called in the buildDropDown Function. First, this function checks if there is anything in storage. An if statement is then used -- if there is no data in storage, use the events Array mentioned previously and store it so next time there is something in storage. JSON puts the data into a string then parses it back in the object.</p> 
                    <code>function displayStats() & function(s) calculateX()</code>
                    <p>Within this program, there are 4 functions working to calculate the total, average, minimum, and maximums of the attendance data. -- To calculate the total attendenace in each city a for-loop is implemented to add the various attendences up for each respective city. To calculate the average, the calculateTotal is used with simple mathematical operations used to find averages. To calculate the maximum number of attendants, a for-loop is used again to iterate through all the cities and if the number of attendees is greater than the max, then the max is then that number. Similarly, to calculate the minumum attendance, a for-loop is used again except if the number is less than the minimum, then that number is the minimum attended event. The displayStats function calls upon these functions to do the math involved in this program.</p> 
                    <code>function displayEventData()</code> 
                    <p>is the function that handles displaying the table of events. Just like the dropdown menu used a template from the HTML document, so does this table. The table is cleared, a for-loop is used to iterate through the various events to display them in tableCells. appendChild is used to create the rows.</p>
                    <code>function getEvents()</code>
                    <p>This function gets all the events from the array of objects. Then, the function uses getAttribute to target the anchor tag element in the drop down menu template which is set to be the name of the city they clicked on so that it shows that city's data. These are filtered events which an if-statement is used to communicate how the app should respond. If the city name is for a specific city (not equal to All Cities) then the events need filtered via drop down menu. If the cityName is equal to an event city, then return THAT city's attendance data. The function finishes by calling for the proper city name to display in the text of the dropdown menu, as well as calling for the display of filtered events.</p> 
                    <code>function saveEventData</code>
                    <p>The last function in this program is to save event data from any creations of new events from the user. it gets the new event's name, city, attendance stats, and event date from the user's form inputs. Next, the program alters the display of the event dates and times so that it is user-friendly on the eyes. Also, the states drop-down is included on the form. Then a variable is made to describe newEvent for any new event a user may add. It is an object with the properties correlating the relevant values so that the program can use and display that data. JSON.stringify is used to update the page. Lastly, the buildDropDown function is called so that any new event data also drops down and displays in the stats box. </p>

            </div>
        </div>
    </main>


    <!-- ==== Footer Section ==== -->
    <footer class="container-fluid mt-5">
        <div class="row footer-bg-cta">
            <div class="col">
                <div class="container py-2 footer-cta">
                    <div class="row row-cols-1 align-items-center">
                        <div class="col p-2 text-center">
                            <h1 class="footcta ftfix">Let's Work Together</h1>
                            <h4>Need something done? I'm open to new opportunities and ready
                                to work!</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row align-items-center footer-main">
            <div class="container">
                <div class="row align-items-center gy-2">
                    <div
                        class="col d-flex m-2 justify-content-center justify-content-md-start order-last order-md-first">
                        &copy; 2023 Anna Baschnagel
                    </div>
                    <div class="col d-flex justify-content-center">
                        <img src="/img/For Web/png/White logo - no background.png" height="75" class="mb-2" />
                    </div>
                    <div class="col-12 col-md d-flex justify-content-center justify-content-md-end m-2">
                        <a href="#" target="_blank" class="socialicons"><i class="bi bi-linkedin p-2"></i></a>
                        <a href="#" target="_blank" class="socialicons"><i class="bi bi-twitter p-2"></i></a>
                        <a href="#" target="_blank" class="socialicons"><i class="bi bi-youtube p-2"></i></a>
                        <a href="#" target="_blank" class="socialicons"><i class="bi bi-instagram p-2"></i></a>
                        <!--<a href="mailto:baschnagelac@gmail.com" target="_blank"><i class="bi bi-mail"></i></a> -->

                    </div>
                </div>
            </div>
        </div>
    </footer>


    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
        crossorigin="anonymous"></script>
        <script src="js/site.js"></script>
    <script src="js/prism.js"></script>
    <script>
        Prism.plugins.NormalizeWhitespace.setDefaults({
            'remove-trailing': true,
            'remove-indent': true,
            'left-trim': true,
            'right-trim': true
        });
    </script>
</body>


</html>